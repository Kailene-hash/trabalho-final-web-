<!DOCTYPE html>


<html>
  <head>
    import multer from "multer";
    import path from "path";
    import fs from "fs";
    
    <title>Ventura 3D</title>
    <link rel="stylesheet" href="../css/estilo.css">
    
  </head>
  <body>
    <header>
      <div id="logo">
        <img id="logo" src="/images/LogoVentura3d-TrabalhoFinalWEB.jpeg" alt="">
      </div>
    </header>

    
      <h1>Adicione a imagem:  </h1>
      <section id="main">
    <h1>Adicione a imagem:</h1>
    <div class="card2">
        <form id="formAddImg">
          <label for="imagem">Selecione a imagem:</label>
          <input type="file" id="imagem" name="imagem" accept="image/*" required><br>

          <button type="submit">Adicionar Imagem</button>
        </form>

    </div>
</section>
    
    <footer>
      <div id="logo">
        <img id="logo" src="/images/LogoVentura3d-TrabalhoFinalWEB.jpeg" alt="">
      </div>
    </footer>
    <script>
    document.getElementById('formAddImg').addEventListener('submit', async function(e) {
        e.preventDefault();

        const arquivo = document.getElementById('imagem').files[0];

        if (!arquivo) {
            alert('Selecione uma imagem!');
            return;
        }

        const formData = new FormData();
        formData.append('imagem', arquivo);

        try {
            const resposta = await fetch('http://localhost:3000/imagens', {
                method: 'POST',
                body: formData
            });

            const dados = await resposta.json();

            if (resposta.ok) {
                alert('✅ Imagem enviada com sucesso!');
                this.reset();
            } else {
                alert('❌ Erro: ' + dados.mensagem);
            }
        } catch (erro) {
            console.error(erro);
            alert('❌ Erro ao conectar com o servidor');
        }
    });
    </script>





  </body>
</html>